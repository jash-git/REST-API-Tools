"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9566],{79566:function(e,n,t){t.d(n,{Z:function(){return J}});var r=t(47568),o=t(7297),a=t(20414),i=t(85893),c=t(67294),s=t(64298),l=t(29689),u=t(27603),d=t(41664),h=t.n(d),p=t(11163),f=(t(60465),t(62830)),m=t.n(f),g=t(8839),x=t(80973),b=t(87204),y=t(67407),w=t(70916),v=t(36808),k=t.n(v),j=function(e){var n=e.children;return"Dexter-approved"===k().get("secretlab")?(0,i.jsx)("div",{className:"labs",children:n}):null},S=t(90452),C=t(60204),I=t(83253),N=t.n(I),P=t(25675),T=t.n(P),_=t(86501),A=t(85434),E=t(9669),Z=t.n(E);function O(){var e=(0,o.Z)(["\n  .general, .writer, .reader{\n    display: flex;\n    flex-direction: column;\n    .social{\n      background-color: #ebebeb;\n      transition: background-color 0.2s ease-in-out;\n      :hover{\n        background-color: #bbb !important;\n        cursor: pointer;\n      }\n    }\n    footer .transparent{\n      color: #3c3c3b !important;\n    }\n    footer{\n      width: 100%;\n      display: flex;\n      flex-direction: column-reverse;\n      button{\n        width: 100%;\n        margin-bottom: 10px;\n        display: flex;\n        justify-content: center;\n      }\n    }\n    .form{\n      background-color: #ebebeb;\n      margin-top: 20px;\n      padding: 20px;\n      border-radius: 5px;\n    }\n    .terms{\n      color: #3c3c3b !important;\n    }\n  }\n  .reader{\n    margin-bottom: 30px;\n  }\n"]);return O=function(){return e},e}function M(){var e=(0,o.Z)(["\n  margin: 5px 0 0;\n  font-size: 1.4rem;\n"]);return M=function(){return e},e}function L(){var e=(0,o.Z)(["\n  .social:hover {\n    background-color: #00ffa9;\n  }\n\n  display: grid;\n  justify-content: center;\n  grid-auto-flow: column;\n  grid-column-gap: 5px;\n  .loginIcon {\n    font-size: 35px;\n  }\n  > button {\n    justify-self: center;\n  }\n"]);return L=function(){return e},e}function R(){var e=(0,o.Z)(["\n  .magic:hover {\n    background-color: #00ffa9;\n  }\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  @media screen and (max-width: 1100px) {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n  }\n  .loginInput {\n    width: 300px;\n    input {\n      border-radius: 5px;\n      font-size: 16px;\n    }\n  }\n  .box {\n    margin: 0 20px;\n    span {\n      font-weight: bold;\n    }\n  }\n  .socials {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n  }\n  .magic {\n    font-size: 14px;\n  }\n"]);return R=function(){return e},e}function W(){var e=(0,o.Z)(["\n  background-color: white;\n  padding: 6px;\n  border: none;\n  border-radius: 5px;\n"]);return W=function(){return e},e}function z(){var e=(0,o.Z)(["\n  background-color: #3c3c3b;\n  color: #00ff00;\n  border: none;\n  border-radius: 5px;\n  padding: 8px 10px;\n  :hover {\n    cursor: pointer;\n  }\n\n  span {\n    font-size: 14px;\n    display: flex;\n    align-items: center;\n  }\n"]);return z=function(){return e},e}var Y=u.default.div.withConfig({componentId:"sc-383db9d3-0"})(O()),U=u.default.p.withConfig({componentId:"sc-383db9d3-1"})(M()),F=u.default.div.withConfig({componentId:"sc-383db9d3-2"})(L()),q=u.default.div.withConfig({componentId:"sc-383db9d3-3"})(R()),G=u.default.button.withConfig({componentId:"sc-383db9d3-4"})(W()),D=u.default.button.withConfig({componentId:"sc-383db9d3-5"})(z()),J=function(e){var n=(0,l.Z)(!1).value,t=(0,y.aF)(),o=t.user,u=t.setUserData,d=(0,c.useState)(!1),f=d[0],v=d[1],k=(0,c.useState)(null),I=k[0],P=k[1],E=(0,c.useState)(""),O=E[0],M=E[1],L=(0,c.useState)(""),R=L[0],W=L[1],z=(0,c.useState)(""),J=z[0],B=z[1],H=(0,c.useState)(!1),V=H[0],X=H[1],K=(0,c.useState)("/"),Q=K[0],$=K[1],ee=(0,c.useState)(""),ne=ee[0],te=ee[1],re=(0,c.useState)(""),oe=re[0],ae=re[1],ie=(0,c.useState)(""),ce=ie[0],se=ie[1],le=(0,c.useState)(!0),ue=le[0],de=le[1],he=(0,s.cI)(),pe=he.register,fe=he.handleSubmit,me=(he.errors,(0,c.useState)("")),ge=me[0],xe=me[1],be=((0,p.useRouter)(),(0,c.useRef)()),ye=document.getElementById("root"),we=["https://hackernoon.imgix.net/avatars/robot-a1.png","https://hackernoon.imgix.net/avatars/robot-a2.png","https://hackernoon.imgix.net/avatars/robot-a3.png","https://hackernoon.imgix.net/avatars/robot-a4.png","https://hackernoon.imgix.net/avatars/robot-a5.png","https://hackernoon.imgix.net/avatars/robot-a6.png","https://hackernoon.imgix.net/avatars/robot-b1.png","https://hackernoon.imgix.net/avatars/robot-b2.png","https://hackernoon.imgix.net/avatars/robot-b3.png","https://hackernoon.imgix.net/avatars/robot-b4.png","https://hackernoon.imgix.net/avatars/robot-b5.png","https://hackernoon.imgix.net/avatars/robot-b6.png"],ve=function(e,n){return Math.floor(Math.random()*(n-e+1))+e};if((0,c.useEffect)((function(){var e=new URLSearchParams(window.location.search),n=new URLSearchParams(e),t=n.get("redirect"),r=n.get("action"),a=n.get("emoji"),i=n.get("template"),c=n.get("poll");$(t||"/"),r&&te(r),a&&se(a),i&&xe(i),c&&ae(c),o.handle&&(r&&"7"===r&&i?window.open("https://app.hackernoon.com/new?template=".concat(i),"_self"):ne&&"8"===ne&&oe?window.open("https://app.hackernoon.com/new?poll=".concat(oe),"_self"):window.open("".concat(t||"/").concat(r?"?action=".concat(r):"").concat(a?"&emoji=".concat(a):"3"===r?"#commentSection":""),"_self"))}),[]),!e.fromColorPicker)(location.state||{from:{pathname:"/"}}).from;var ke=function(){var e=(0,r.Z)((function(e){return(0,a.__generator)(this,(function(n){return w.default.auth().signInWithPopup(e).then((function(e){var n=e.user;Se(n,{})})),[2]}))}));return function(n){return e.apply(this,arguments)}}(),je=function(){var e=(0,r.Z)((function(){var e,n,t,o,i;return(0,a.__generator)(this,(function(c){switch(c.label){case 0:return(null===(e=window.ethereum)||void 0===e?void 0:e.providers)&&(e=e.providers.find((function(e){return e.isMetaMask}))),e?[4,e.enable()]:(_.toast.error("Please install MetaMask to sign in with your wallet"),[2]);case 1:return c.sent(),n=e.selectedAddress,[4,fetch("https://api.hackernoon.com/getNonceToSign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:n})}).then((function(e){return e.json()})).then((function(e){return e.nonce.toString()}))];case 2:return t=c.sent(),[4,e.request({method:"personal_sign",params:["0x".concat((s=t,s.split("").map((function(e){return e.charCodeAt(0).toString(16).padStart(2,"0")})).join(""))),n]})];case 3:return o=c.sent(),[4,fetch("https://api.hackernoon.com/verifySignedMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:n,signature:o})}).then((function(e){return e.json()})).then((function(e){return e.token}))];case 4:return i=c.sent(),[4,w.default.auth().signInWithCustomToken(i)];case 5:return c.sent().user.getIdToken(!0).then(function(){var e=(0,r.Z)((function(e){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,fetch("https://api.hackernoon.com/auth/auth",{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:e})})];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)})),[2]}var s}))}));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){be.current.focus()}),[be]);var Se=function(){var n=(0,r.Z)((function(n,t){var o,i,c,s,l,d,h,p,f,g;return(0,a.__generator)(this,(function(x){switch(x.label){case 0:return u(n,t),v(!0),[4,(o=w.default.firestore().collection("profiles").doc(n.uid)).get()];case 1:return(i=x.sent()).exists&&i.data().handle?[3,8]:(c="",c=J.length?J.slice(0,J.indexOf("@")):"hacker",[4,w.default.firestore().collection("profiles").where("handle","==",c).limit(1).get()]);case 2:return x.sent().empty||(c+=m()()),[4,w.default.firestore().runTransaction(function(){var n=(0,r.Z)((function(n){var t;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.get(o)];case 1:return(t=r.sent()).exists?[3,3]:[4,n.set(o,{handle:c,avatar:we[ve(0,we.length-1)],callToActions:[],socialMedia:{},interested_tags:e.selectedPurrCats?e.selectedPurrCats:[]})];case 2:return r.sent(),[3,5];case 3:return t.data().handle?[3,5]:[4,n.update(o,{handle:c,avatar:we[ve(0,we.length-1)],interested_tags:e.selectedPurrCats?e.selectedPurrCats:[]})];case 4:r.sent(),r.label=5;case 5:return[2]}}))}));return function(e){return n.apply(this,arguments)}}())];case 3:return x.sent(),"reader"!==e.flow?[3,8]:(s=e.emailOptions.filter((function(e){return e.selected})),l={email:J,handle:c,frequency:"daily"},e.selectedPurrCats.forEach((function(e){return l[e.toLowerCase().replace(" ","-")]=!0})),[4,w.default.firestore().collection("subscriptions").doc(n.uid).set(l)]);case 4:x.sent(),d={lists:s.map((function(e){return e.id})),handle:c,email:J},h={"Content-Type":"application/json",Authorization:"Bearer ".concat(g)},x.label=5;case 5:return x.trys.push([5,7,,8]),p=new URL("https://us-central1-hackernoon-app.cloudfunctions.net/subscription/email-settings-changed"),[4,Z().post(p,d,{headers:h})];case 6:return x.sent(),[3,8];case 7:return f=x.sent(),console.log("something went wrong!",f),[3,8];case 8:return[4,n.getIdToken()];case 9:return g=x.sent(),[4,fetch("https://api.hackernoon.com/auth/auth",{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:g})})];case 10:return x.sent(),"writer"===e.flow?location.href="https://app.hackernoon.com/new":"general"===e.flow?location.href="https://hackernoon.com":"reader"===e.flow?location.href="https://app.hackernoon.com/reader":ne&&"7"===ne&&ge?window.open("https://app.hackernoon.com/new?template=".concat(ge),"_self"):ne&&"8"===ne&&oe?window.open("https://app.hackernoon.com/new?poll=".concat(oe),"_self"):window.open("".concat(Q).concat(ne.length?"?action=".concat(ne):"").concat(ce.length?"&emoji=".concat(ce):"3"===ne?"#commentSection":""),"_self"),[2]}}))}));return function(e,t){return n.apply(this,arguments)}}(),Ce=function(){var e=(0,r.Z)((function(e,n){var t,r,o,i,c,s,l,u,d,h,p;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:if(t=e.email,r=e.password,o=e.trackingOptIn,i=void 0!==o&&o,!ue)return P("You need to accept the terms and policies"),[2];v(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,w.default.firestore().collection("blacklist").where("email","==",t).limit(1).get()];case 2:if(!n.sent().empty)throw new U("That email has been blacklisted as spam. Please contact us if you have been wrongfully lynched.");return[3,4];case 3:return c=n.sent(),P(c.message),v(!1),[2];case 4:return n.trys.push([4,7,8,9]),s=w.default.auth().currentUser,[4,w.default.auth().createUserWithEmailAndPassword(t,r)];case 5:return l=n.sent(),u=l.user,d=l.credential,h=u.uid,fetch("https://api.hackernoon.com/a/auth/email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:h,email:t,password:r})}).catch((function(e){return console.error(e)})),[4,u.sendEmailVerification({url:"https://hackernoon.com"})];case 6:if(n.sent(),s&&s.isAnonymous)try{s.linkWithCredential(d).catch((function(e){}))}catch(a){}return Se(u,{trackingOptIn:i}),v(!1),[3,9];case 7:return p=n.sent(),P(p.message),[3,9];case 8:return v(!1),[7];case 9:return[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),Ie={url:window.location.href,handleCodeInApp:!0},Ne=function(){var e=(0,r.Z)((function(){var e;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:v(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,w.default.firestore().collection("blacklist").where("email","==",J).limit(1).get()];case 2:if(!n.sent().empty)throw new U("That email has been blacklisted as spam. Please contact us if you have been wrongfully lynched.");return[3,4];case 3:return e=n.sent(),console.error(e),P(e.message),v(!1),[2];case 4:return w.default.auth().sendSignInLinkToEmail(J,Ie).then((function(){window.localStorage.setItem("emailForSignIn",J),W("A Magical link was sent to your email"),v(!1)})).catch((function(e){M("An error occured!"),v(!1)})),(0,C.logEvent)({category:"Magic Link",action:"SignIn",label:"Magic Link Signin from hackernoon.com"}),[2]}}))}));return function(){return e.apply(this,arguments)}}();(0,c.useState)((function(){if(w.default.auth().isSignInWithEmailLink(window.location.href)){var e=window.localStorage.getItem("emailForSignIn");e||(e=window.prompt("Please provide your email for confirmation")),w.default.auth().signInWithEmailLink(e,window.location.href).then((function(e){window.localStorage.removeItem("emailForSignIn")})).catch((function(e){console.log(e)}))}}),[]);return(0,i.jsx)(Y,{children:(0,i.jsxs)(q,{className:e.flow,children:[!V&&(0,i.jsxs)(g.ZP,{style:{display:"flex",flexDirection:"column",alignItems:"center"},className:"form",onSubmit:fe(Ce),children:[(0,i.jsx)("fieldset",{className:"loginInput",children:(0,i.jsx)("div",{className:"mt-2 shadow-sm",children:(0,i.jsx)("input",{autoComplete:e.fromColorPicker?"new-password":"on",id:"email",name:"email",type:"email",placeholder:"Email",onChange:function(e){return B(e.target.value)},ref:function(e){pe(e,{required:!0}),be.current=e},style:e.fromColorPicker&&!n?{border:"2px solid #212428"}:{}})})}),(0,i.jsx)("fieldset",{className:"loginInput",children:(0,i.jsx)("div",{className:"mt-2 shadow-sm",children:(0,i.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Password",ref:pe({required:!0}),style:e.fromColorPicker&&!n?{border:"2px solid #212428"}:{}})})}),(0,i.jsx)(j,{children:(0,i.jsx)("fieldset",{children:(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"checkbox",name:"trackingOptIn",ref:pe}),(0,i.jsx)("label",{htmlFor:"trackingOptIn",children:"Opt in to HackerNoon reading history for recommendations and more!"}),(0,i.jsx)(S.Z,{content:"We only track reading internally to give better recommendations. This is subject to the site's terms of service and privacy policy.",children:(0,i.jsx)(A.ag,{})})]})})}),(0,i.jsxs)("footer",{children:[(0,i.jsx)(h(),{href:"/login".concat(window.location.search),prefetch:!1,children:(0,i.jsx)(b.F6,{className:"transparent",style:{color:"white",fontSize:"12px"},small:"true",type:"button",children:"ALREADY HAVE AN ACCOUNT?"})}),(0,i.jsxs)(D,{type:"submit",disabled:f,loading:f.toString(),className:f&&"loading",onClick:function(){return e.fromColorPicker&&void(0,C.logEvent)({category:"ColorPicker",action:"Account creation",label:"Account created from Color Picker"})||e.fromStoryReactions&&void(0,C.logEvent)({category:"Story Reaction",action:"Account creation",label:"Account created from story reactions"})},children:[f&&(0,i.jsx)(A.he,{})," ",!f&&(0,i.jsx)("span",{style:{fontWeight:"bold"},children:"CREATE ACCOUNT"})]})]}),(0,i.jsxs)("div",{className:"terms",style:{color:"white",fontWeight:"bold",fontSize:"16px"},children:[(0,i.jsx)("input",{checked:ue,onChange:function(){de(!ue)},type:"checkbox"})," I accept the"," ",(0,i.jsx)("a",{style:{color:"#0f0"},target:"_blank",href:"/terms",children:"terms"})," ","and"," ",(0,i.jsx)("a",{style:{color:"#0f0"},target:"_blank",href:"privacy",children:"policies"})]}),(e.fromColorPicker||e.fromStoryReactions)&&(0,i.jsxs)("div",{className:"privacy",children:[(0,i.jsx)(h(),{href:"https://hackernoon.com/privacy",prefetch:!1,children:(0,i.jsx)(b.F6,{children:"Privacy"})}),(0,i.jsx)(h(),{href:"https://hackernoon.com/privacy",children:(0,i.jsx)(b.F6,{children:"Terms"})})]}),I&&(0,i.jsx)(x.Z,{children:I})]}),!V&&(0,i.jsx)("p",{style:{fontWeight:"bold",marginLeft:"40px",marginRight:"25px",color:"#fff"},children:"OR"}),(0,i.jsxs)("div",{className:"box socials",children:[(0,i.jsx)("div",{className:"button-row--google",children:(0,i.jsxs)(F,{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[(0,i.jsx)(G,{style:{display:"flex",alignItems:"center"},className:"social",type:"button",disabled:f,onClick:function(){return ke(new w.default.auth.GoogleAuthProvider)},children:(0,i.jsx)(T(),{src:"https://hackernoon.imgix.net/images/bYnj8YlSMrbGYYve1iskmRSuqXg1-wrd2ha2.png",width:"30px",height:"30px"})}),(0,i.jsx)(G,{style:{display:"flex",alignItems:"center"},className:"social",type:"button",disabled:f,onClick:function(){return ke(new w.default.auth.GithubAuthProvider)},children:(0,i.jsx)(A.Ey,{width:"30",className:"loginIcon"})}),(0,i.jsx)(G,{style:{display:"flex",alignItems:"center"},className:"social",type:"button",disabled:f,onClick:function(){return ke(new w.default.auth.TwitterAuthProvider)},children:(0,i.jsx)(T(),{src:"https://hackernoon.imgix.net/images/bYnj8YlSMrbGYYve1iskmRSuqXg1-puf2hys.png",width:"30px",height:"30px"})})]})}),(0,i.jsx)(G,{style:{margin:"0 auto",marginBottom:"1rem",width:"300px",height:"43px"},className:"social magic",type:"button",disabled:f,onClick:je,children:"SIGN UP WITH WALLET"}),(0,i.jsx)(G,{style:{margin:"0 auto",width:"300px",height:"43px"},className:"social magic",type:"button",disabled:f,onClick:function(){return X(!V)},children:"SEND ME A MAGIC LINK"})]}),(0,i.jsxs)(N(),{isOpen:V,onRequestClose:function(){return X(!1)},contentLabel:"Magic Link signin",appElement:ye,style:{content:{width:"400px",height:"400px",margin:"0 auto",top:"200px"}},children:[(0,i.jsx)("h2",{style:{color:"#3c3c3b"},children:"Send Me a Magic Link"}),(0,i.jsxs)(g.ZP,{onSubmit:fe(Ne),children:[(0,i.jsx)("fieldset",{children:(0,i.jsx)("div",{children:(0,i.jsx)("input",{id:"email",name:"email",type:"email",placeholder:"Email",onChange:function(e){return B(e.target.value)},value:J})})}),O&&(0,i.jsx)("p",{style:{color:"#3c3c3b"},children:O}),R&&(0,i.jsxs)("p",{style:{color:"#3c3c3b"},children:[R," ","\u2728"]}),(0,i.jsx)("footer",{children:(0,i.jsxs)(b.ZP,{style:{width:"100%",display:"flex",justifyContent:"center"},onClick:function(){return Ne()},disabled:f,loading:f.toString(),className:f&&"loading",children:[f&&(0,i.jsx)(A.he,{})," ",(0,i.jsx)("span",{children:"Send"})]})}),I&&(0,i.jsx)(x.Z,{children:I})]})]})]})})}},80973:function(e,n,t){var r=t(7297);function o(){var e=(0,r.Z)(["\n  border-radius: 2px;\n  padding: 0.8rem;\n  background: ",";\n  margin: 0 0 1.2rem;\n  font-size: 1.4rem;\n  border: 2px solid\n    ",";\n  color: ",";\n\n  p {\n    margin: 0 0 1.2rem;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n\n  a {\n    text-decoration: underline;\n    color: inherit;\n    cursor: pointer;\n  }\n\n  h3 {\n    font-size: 1.8rem;\n    margin: 0 0 0.6rem;\n    text-align: left;\n  }\n\n  strong {\n    margin-right: 1rem;\n  }\n"]);return o=function(){return e},e}var a=t(27603).default.div.withConfig({componentId:"sc-c2589523-0"})(o(),(function(e){return"info"===e.color?e.theme.veryDarkGreen:"yellow"===e.color?"#f5ec43":e.theme.lightRed}),(function(e){return"info"===e.color?e.theme.green:"yellow"===e.color?"#f5ec43":e.theme.red}),(function(e){return"info"===e.color?e.theme.green:"yellow"===e.color?"#666105":e.theme.darkRed}));n.Z=a}}]);